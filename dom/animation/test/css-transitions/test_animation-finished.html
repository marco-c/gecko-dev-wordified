<
!
doctype
html
>
<
meta
charset
=
utf
-
8
>
<
title
>
CSSTransition
.
finished
<
/
title
>
<
script
src
=
"
/
resources
/
testharness
.
js
"
>
<
/
script
>
<
script
src
=
"
/
resources
/
testharnessreport
.
js
"
>
<
/
script
>
<
script
src
=
"
.
.
/
testcommon
.
js
"
>
<
/
script
>
<
style
>
.
animated
-
div
{
margin
-
left
:
100px
;
transition
:
margin
-
left
1000s
linear
1000s
;
}
<
/
style
>
<
body
>
<
div
id
=
"
log
"
>
<
/
div
>
<
script
>
'
use
strict
'
;
const
ANIM_DELAY_MS
=
1000000
;
/
/
1000s
const
ANIM_DUR_MS
=
1000000
;
/
/
1000s
promise_test
(
async
t
=
>
{
const
div
=
addDiv
(
t
{
'
class
'
:
'
animated
-
div
'
}
)
;
flushComputedStyle
(
div
)
;
div
.
style
.
marginLeft
=
'
200px
'
;
/
/
initiate
transition
const
animation
=
div
.
getAnimations
(
)
[
0
]
;
animation
.
finish
(
)
;
await
animation
.
finished
;
animation
.
play
(
)
;
assert_equals
(
animation
.
currentTime
0
'
Replaying
a
finished
transition
should
reset
its
'
+
'
currentTime
'
)
;
}
'
Test
restarting
a
finished
transition
'
)
;
promise_test
(
async
t
=
>
{
const
div
=
addDiv
(
t
{
'
class
'
:
'
animated
-
div
'
}
)
;
flushComputedStyle
(
div
)
;
div
.
style
.
marginLeft
=
'
200px
'
;
/
/
initiate
transition
const
animation
=
div
.
getAnimations
(
)
[
0
]
;
await
animation
.
ready
;
animation
.
playbackRate
=
-
1
;
await
animation
.
finished
;
animation
.
play
(
)
;
/
/
FIXME
:
once
animation
.
effect
.
computedTiming
.
endTime
is
available
(
bug
/
/
1108055
)
we
should
use
that
here
.
assert_equals
(
animation
.
currentTime
ANIM_DELAY_MS
+
ANIM_DUR_MS
'
Replaying
a
finished
reversed
transition
should
reset
'
+
'
its
currentTime
to
the
end
of
the
effect
'
)
;
}
'
Test
restarting
a
reversed
finished
transition
'
)
;
<
/
script
>
<
/
body
>
