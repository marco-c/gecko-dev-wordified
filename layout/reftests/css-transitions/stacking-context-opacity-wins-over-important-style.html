<
!
DOCTYPE
html
>
<
html
class
=
"
reftest
-
wait
"
>
<
title
>
Opacity
transition
winning
over
!
important
rule
creates
a
stacking
context
<
/
title
>
<
style
>
span
{
height
:
100px
;
width
:
100px
;
position
:
fixed
;
background
:
green
;
top
:
50px
;
}
#
test
{
width
:
100px
;
height
:
100px
;
background
:
blue
;
transition
:
opacity
100s
steps
(
1
start
)
;
opacity
:
0
!
important
;
}
<
/
style
>
<
span
>
<
/
span
>
<
div
id
=
"
test
"
>
<
/
div
>
<
script
>
window
.
addEventListener
(
"
load
"
(
)
=
>
{
var
target
=
document
.
getElementById
(
"
test
"
)
;
getComputedStyle
(
target
)
.
opacity
;
target
.
style
.
setProperty
(
"
opacity
"
"
1
"
"
important
"
)
;
getComputedStyle
(
target
)
.
opacity
;
requestAnimationFrame
(
(
)
=
>
{
document
.
documentElement
.
classList
.
remove
(
"
reftest
-
wait
"
)
;
}
)
;
}
)
;
<
/
script
>
