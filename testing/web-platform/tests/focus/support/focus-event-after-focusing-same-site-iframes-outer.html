<
!
doctype
html
>
<
meta
charset
=
"
utf
-
8
"
>
<
title
>
Focus
event
after
focusing
same
site
iframes
outer
<
/
title
>
<
iframe
src
=
"
focus
-
event
-
after
-
focusing
-
iframes
-
inner
.
html
"
>
<
/
iframe
>
<
script
>
let
outerlog
=
"
outerlog
:
"
;
let
iframe
=
document
.
querySelector
(
"
iframe
"
)
;
window
.
onmessage
=
function
(
e
)
{
if
(
e
.
data
=
=
"
focus
"
)
{
outerlog
+
=
"
willfocusiframe
"
;
document
.
querySelector
(
"
iframe
"
)
.
focus
(
)
;
outerlog
+
=
"
didfocusiframe
"
;
}
else
if
(
e
.
data
=
=
"
getlog
"
)
{
opener
.
postMessage
(
outerlog
"
*
"
)
;
}
}
;
window
.
onload
=
function
(
)
{
window
.
onfocus
=
function
(
)
{
outerlog
+
=
"
windowfocus
"
;
}
;
opener
.
postMessage
(
"
ready
"
"
*
"
)
;
}
;
<
/
script
>
