<
!
doctype
html
>
<
meta
charset
=
utf
-
8
>
<
title
>
initial
selection
on
focus
of
contenteditable
<
/
title
>
<
script
src
=
"
/
resources
/
testharness
.
js
"
>
<
/
script
>
<
script
src
=
"
/
resources
/
testharnessreport
.
js
"
>
<
/
script
>
<
script
>
var
testsJsLibraryOnly
=
true
<
/
script
>
<
script
src
=
"
.
.
/
.
.
/
editing
/
include
/
tests
.
js
"
>
<
/
script
>
<
body
>
<
div
id
=
"
editor
"
contenteditable
style
=
"
min
-
height
:
1em
;
"
>
<
/
div
>
<
script
>
"
use
strict
"
;
(
function
(
)
{
const
tests
=
[
{
description
:
"
empty
editor
should
set
focus
to
start
of
it
"
content
:
"
{
}
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
"
content
:
"
[
]
abc
"
}
{
description
:
"
editor
should
set
selection
to
before
the
<
br
>
node
"
content
:
"
{
}
<
br
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
first
<
br
>
node
"
content
:
"
{
}
<
br
>
<
br
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
<
p
>
node
"
content
:
"
<
p
>
[
]
abc
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
first
visible
character
in
the
text
node
in
the
<
p
>
node
"
content
:
"
<
p
>
[
]
abc
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
<
p
>
node
because
of
preformatted
white
-
space
"
content
:
"
<
p
style
=
\
"
white
-
space
:
pre
\
"
>
[
]
abc
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
<
p
>
node
because
of
preformatted
line
break
"
content
:
"
<
p
style
=
\
"
white
-
space
:
pre
\
"
>
[
]
\
nabc
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
<
br
>
node
in
the
<
p
>
node
"
content
:
"
<
p
>
{
}
<
br
>
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
first
<
br
>
node
in
the
<
p
>
node
"
content
:
"
<
p
>
{
}
<
br
>
<
br
>
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
<
span
>
node
"
content
:
"
<
span
>
[
]
abc
<
/
span
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
<
br
>
node
in
the
<
span
>
node
"
content
:
"
<
span
>
{
}
<
br
>
<
/
span
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
first
<
br
>
node
in
the
<
span
>
node
"
content
:
"
<
span
>
{
}
<
br
>
<
br
>
<
/
span
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
empty
<
span
>
node
"
content
:
"
{
}
<
span
>
<
/
span
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
empty
<
b
>
node
"
content
:
"
{
}
<
b
>
<
/
b
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
empty
<
i
>
node
"
content
:
"
{
}
<
i
>
<
/
i
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
empty
<
u
>
node
"
content
:
"
{
}
<
u
>
<
/
u
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
empty
<
s
>
node
"
content
:
"
{
}
<
s
>
<
/
s
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
empty
<
code
>
node
"
content
:
"
{
}
<
code
>
<
/
code
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
empty
<
a
>
node
"
content
:
"
{
}
<
a
href
=
\
"
foo
.
html
\
"
>
<
/
a
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
empty
<
foobar
>
node
"
content
:
"
{
}
<
foobar
>
<
/
foobar
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
<
input
>
node
"
content
:
"
{
}
<
input
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
<
img
>
node
"
content
:
"
{
}
<
img
alt
=
\
"
foo
\
"
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
second
<
span
>
node
"
content
:
"
<
span
>
<
/
span
>
<
span
>
[
]
abc
<
/
span
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
<
br
>
node
in
the
second
<
span
>
node
"
content
:
"
<
span
>
<
/
span
>
<
span
>
{
}
<
br
>
<
/
span
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
first
<
span
>
node
#
1
"
content
:
"
<
span
>
[
]
abc
<
/
span
>
<
span
>
abc
<
/
span
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
first
<
span
>
node
#
2
"
content
:
"
<
span
>
[
]
abc
<
/
span
>
<
span
>
<
br
>
<
/
span
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
<
br
>
node
in
the
first
<
span
>
node
#
1
"
content
:
"
<
span
>
{
}
<
br
>
<
/
span
>
<
span
>
<
br
>
<
/
span
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
<
br
>
node
in
the
first
<
span
>
node
#
2
"
content
:
"
<
span
>
{
}
<
br
>
<
/
span
>
<
span
>
abc
<
/
span
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
second
<
span
>
node
since
the
text
node
in
the
first
<
span
>
node
is
only
whitespaces
"
content
:
"
<
span
>
<
/
span
>
<
span
>
[
]
abc
<
/
span
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
<
br
>
node
in
the
second
<
span
>
node
since
the
text
node
in
the
first
<
span
>
node
is
only
whitespaces
"
content
:
"
<
span
>
<
/
span
>
<
span
>
{
}
<
br
>
<
/
span
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
second
<
span
>
node
even
if
there
is
a
whitespace
only
text
node
before
the
first
<
span
>
node
"
content
:
"
<
span
>
<
/
span
>
<
span
>
[
]
abc
<
/
span
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
<
br
>
node
in
the
second
<
span
>
node
even
if
there
is
a
whitespace
only
text
node
before
the
first
<
span
>
node
"
content
:
"
<
span
>
<
/
span
>
<
span
>
{
}
<
br
>
<
/
span
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
second
<
p
>
node
following
the
empty
<
p
>
node
"
content
:
"
<
p
>
<
/
p
>
<
p
>
[
]
abc
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
second
<
p
>
node
following
another
<
p
>
node
containing
only
a
comment
node
"
content
:
"
<
p
>
<
!
-
-
comment
-
-
>
<
/
p
>
<
p
>
[
]
abc
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
<
br
>
node
in
the
second
<
p
>
node
"
content
:
"
<
p
>
<
/
p
>
<
p
>
{
}
<
br
>
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
first
<
p
>
node
#
1
"
content
:
"
<
p
>
[
]
abc
<
/
p
>
<
p
>
abc
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
first
<
p
>
node
#
2
"
content
:
"
<
p
>
[
]
abc
<
/
p
>
<
p
>
<
br
>
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
<
br
>
node
in
the
first
<
p
>
node
#
1
"
content
:
"
<
p
>
{
}
<
br
>
<
/
p
>
<
p
>
<
br
>
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
<
br
>
node
in
the
first
<
p
>
node
#
2
"
content
:
"
<
p
>
{
}
<
br
>
<
/
p
>
<
p
>
abc
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
second
<
p
>
node
since
the
text
node
in
the
first
<
p
>
node
is
only
whitespaces
"
content
:
"
<
p
>
<
/
p
>
<
p
>
[
]
abc
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
first
<
p
>
node
whose
white
-
spaces
are
preformatted
"
content
:
"
<
p
style
=
\
"
white
-
space
:
pre
\
"
>
[
]
<
/
p
>
<
p
>
abc
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
first
<
p
>
node
whose
line
breaks
are
preformatted
"
content
:
"
<
p
style
=
\
"
white
-
space
:
pre
\
"
>
[
]
\
n
<
/
p
>
<
p
>
abc
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
<
br
>
node
in
the
second
<
p
>
node
since
the
text
node
in
the
first
<
p
>
node
is
only
whitespaces
"
content
:
"
<
p
>
<
/
p
>
<
p
>
{
}
<
br
>
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
second
<
p
>
node
even
if
there
is
a
whitespace
only
text
node
before
the
first
<
p
>
node
"
content
:
"
<
p
>
<
/
p
>
<
p
>
[
]
abc
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
<
br
>
node
in
the
second
<
p
>
node
even
if
there
is
a
whitespace
only
text
node
before
the
first
<
p
>
node
"
content
:
"
<
p
>
<
/
p
>
<
p
>
{
}
<
br
>
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
<
span
>
node
in
the
second
<
p
>
node
"
content
:
"
<
p
>
<
span
>
<
/
span
>
<
/
p
>
<
p
>
<
span
>
[
]
abc
<
/
span
>
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
<
br
>
node
in
the
<
span
>
node
in
the
second
<
p
>
node
"
content
:
"
<
p
>
<
span
>
<
/
span
>
<
/
p
>
<
p
>
<
span
>
{
}
<
br
>
<
/
span
>
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
<
span
>
node
in
the
first
<
p
>
node
#
1
"
content
:
"
<
p
>
<
span
>
[
]
abc
<
/
span
>
<
/
p
>
<
p
>
<
span
>
abc
<
/
span
>
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
start
of
the
text
node
in
the
<
span
>
node
in
the
first
<
p
>
node
#
2
"
content
:
"
<
p
>
<
span
>
[
]
abc
<
/
span
>
<
/
p
>
<
p
>
<
span
>
<
br
>
<
/
span
>
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
<
br
>
node
in
the
<
span
>
node
in
the
first
<
p
>
node
#
1
"
content
:
"
<
p
>
<
span
>
{
}
<
br
>
<
/
span
>
<
/
p
>
<
p
>
<
span
>
<
br
>
<
/
span
>
<
/
p
>
"
}
{
description
:
"
editor
should
set
selection
to
before
the
<
br
>
node
in
the
<
span
>
node
in
the
first
<
p
>
node
#
2
"
content
:
"
<
p
>
<
span
>
{
}
<
br
>
<
/
span
>
<
/
p
>
<
p
>
<
span
>
abc
<
/
span
>
<
/
p
>
"
}
{
description
:
"
editor
should
collapse
selection
before
the
non
-
editable
<
span
>
node
"
content
:
"
{
}
<
span
contenteditable
=
\
"
false
\
"
>
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
before
the
non
-
editable
<
span
>
node
even
if
it
has
a
text
node
"
content
:
"
{
}
<
span
contenteditable
=
\
"
false
\
"
>
abc
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
before
the
non
-
editable
<
span
>
node
even
if
it
has
a
<
br
>
node
"
content
:
"
{
}
<
span
contenteditable
=
\
"
false
\
"
>
<
br
>
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
before
the
non
-
editable
empty
<
span
>
node
followed
by
a
text
node
"
content
:
"
{
}
<
span
contenteditable
=
\
"
false
\
"
>
<
/
span
>
<
span
>
abc
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
before
the
non
-
editable
<
span
>
node
having
a
text
node
and
followed
by
another
text
node
"
content
:
"
{
}
<
span
contenteditable
=
\
"
false
\
"
>
abc
<
/
span
>
<
span
>
def
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
before
the
non
-
editable
<
span
>
node
having
a
<
br
>
node
and
followed
by
a
text
node
"
content
:
"
{
}
<
span
contenteditable
=
\
"
false
\
"
>
<
br
>
<
/
span
>
<
span
>
abc
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
before
the
non
-
editable
empty
<
span
>
node
followed
by
a
<
br
>
node
"
content
:
"
{
}
<
span
contenteditable
=
\
"
false
\
"
>
<
/
span
>
<
span
>
<
br
>
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
before
the
non
-
editable
<
span
>
node
having
text
node
and
followed
by
a
<
br
>
node
"
content
:
"
{
}
<
span
contenteditable
=
\
"
false
\
"
>
abc
<
/
span
>
<
span
>
<
br
>
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
before
the
non
-
editable
<
span
>
node
having
a
<
br
>
node
and
followed
by
another
<
br
>
node
"
content
:
"
{
}
<
span
contenteditable
=
\
"
false
\
"
>
<
br
>
<
/
span
>
<
span
>
<
br
>
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
before
the
non
-
editable
empty
<
p
>
node
followed
by
a
text
node
"
content
:
"
{
}
<
p
contenteditable
=
\
"
false
\
"
>
<
/
p
>
<
p
>
abc
<
/
p
>
"
}
{
description
:
"
editor
should
collapse
selection
before
the
non
-
editable
<
p
>
node
having
a
text
node
and
followed
by
another
text
node
"
content
:
"
{
}
<
p
contenteditable
=
\
"
false
\
"
>
abc
<
/
p
>
<
p
>
def
<
/
p
>
"
}
{
description
:
"
editor
should
collapse
selection
before
the
non
-
editable
<
p
>
node
having
a
<
br
>
node
and
followed
by
a
text
node
"
content
:
"
{
}
<
p
contenteditable
=
\
"
false
\
"
>
<
br
>
<
/
p
>
<
p
>
abc
<
/
p
>
"
}
{
description
:
"
editor
should
collapse
selection
before
the
non
-
editable
empty
<
p
>
node
followed
by
a
<
br
>
node
"
content
:
"
{
}
<
p
contenteditable
=
\
"
false
\
"
>
<
/
p
>
<
p
>
<
br
>
<
/
p
>
"
}
{
description
:
"
editor
should
collapse
selection
before
the
non
-
editable
<
p
>
node
having
text
node
and
followed
by
a
<
br
>
node
"
content
:
"
{
}
<
p
contenteditable
=
\
"
false
\
"
>
abc
<
/
p
>
<
p
>
<
br
>
<
/
p
>
"
}
{
description
:
"
editor
should
collapse
selection
before
the
non
-
editable
<
p
>
node
having
a
<
br
>
node
and
followed
by
another
<
br
>
node
"
content
:
"
{
}
<
p
contenteditable
=
\
"
false
\
"
>
<
br
>
<
/
p
>
<
p
>
<
br
>
<
/
p
>
"
}
{
description
:
"
editor
should
collapse
selection
to
start
of
itself
when
there
is
only
empty
inline
elements
before
the
non
-
editable
node
before
first
editable
text
node
"
content
:
"
{
}
<
span
>
<
/
span
>
<
span
contenteditable
=
\
"
false
\
"
>
<
/
span
>
<
span
>
abc
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
to
start
of
itself
when
there
is
only
empty
inline
elements
before
the
non
-
editable
node
having
a
text
node
before
first
editable
text
node
"
content
:
"
{
}
<
span
>
<
/
span
>
<
span
contenteditable
=
\
"
false
\
"
>
abc
<
/
span
>
<
span
>
def
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
to
start
of
itself
when
there
is
only
empty
inline
elements
before
the
non
-
editable
node
having
a
<
br
>
node
before
first
editable
text
node
"
content
:
"
{
}
<
span
>
<
/
span
>
<
span
contenteditable
=
\
"
false
\
"
>
<
br
>
<
/
span
>
<
span
>
abc
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
to
start
of
itself
when
there
is
only
empty
inline
elements
before
the
non
-
editable
node
before
first
editable
<
br
>
node
"
content
:
"
{
}
<
span
>
<
/
span
>
<
span
contenteditable
=
\
"
false
\
"
>
<
/
span
>
<
span
>
<
br
>
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
to
start
of
itself
when
there
is
only
empty
inline
elements
before
the
non
-
editable
node
having
a
text
node
before
first
editable
<
br
>
node
"
content
:
"
{
}
<
span
>
<
/
span
>
<
span
contenteditable
=
\
"
false
\
"
>
abc
<
/
span
>
<
span
>
<
br
>
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
to
start
of
itself
when
there
is
only
empty
inline
elements
before
the
non
-
editable
node
having
a
<
br
>
node
before
first
editable
<
br
>
node
"
content
:
"
{
}
<
span
>
<
/
span
>
<
span
contenteditable
=
\
"
false
\
"
>
<
br
>
<
/
span
>
<
span
>
<
br
>
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
to
start
of
the
first
dive
element
when
there
is
only
empty
inline
elements
before
the
non
-
editable
node
before
first
editable
text
node
"
content
:
"
<
div
>
{
}
<
span
>
<
/
span
>
<
span
contenteditable
=
\
"
false
\
"
>
<
/
span
>
<
span
>
abc
<
/
span
>
<
/
div
>
"
}
{
description
:
"
editor
should
collapse
selection
to
start
of
the
first
dive
element
when
there
is
only
empty
inline
elements
before
the
non
-
editable
node
having
a
text
node
before
first
editable
text
node
"
content
:
"
<
div
>
{
}
<
span
>
<
/
span
>
<
span
contenteditable
=
\
"
false
\
"
>
abc
<
/
span
>
<
span
>
def
<
/
span
>
<
/
div
>
"
}
{
description
:
"
editor
should
collapse
selection
to
start
of
the
first
dive
element
when
there
is
only
empty
inline
elements
before
the
non
-
editable
node
having
a
<
br
>
node
before
first
editable
text
node
"
content
:
"
<
div
>
{
}
<
span
>
<
/
span
>
<
span
contenteditable
=
\
"
false
\
"
>
<
br
>
<
/
span
>
<
span
>
abc
<
/
span
>
<
/
div
>
"
}
{
description
:
"
editor
should
collapse
selection
to
start
of
the
first
dive
element
when
there
is
only
empty
inline
elements
before
the
non
-
editable
node
before
first
editable
<
br
>
node
"
content
:
"
<
div
>
{
}
<
span
>
<
/
span
>
<
span
contenteditable
=
\
"
false
\
"
>
<
/
span
>
<
span
>
<
br
>
<
/
span
>
<
/
div
>
"
}
{
description
:
"
editor
should
collapse
selection
to
start
of
the
first
dive
element
when
there
is
only
empty
inline
elements
before
the
non
-
editable
node
having
a
text
node
before
first
editable
<
br
>
node
"
content
:
"
<
div
>
{
}
<
span
>
<
/
span
>
<
span
contenteditable
=
\
"
false
\
"
>
abc
<
/
span
>
<
span
>
<
br
>
<
/
span
>
<
/
div
>
"
}
{
description
:
"
editor
should
collapse
selection
to
start
of
the
first
dive
element
when
there
is
only
empty
inline
elements
before
the
non
-
editable
node
having
a
<
br
>
node
before
first
editable
<
br
>
node
"
content
:
"
<
div
>
{
}
<
span
>
<
/
span
>
<
span
contenteditable
=
\
"
false
\
"
>
<
br
>
<
/
span
>
<
span
>
<
br
>
<
/
span
>
<
/
div
>
"
}
{
description
:
"
editor
should
collapse
selection
to
the
first
editable
text
node
in
the
first
<
span
>
node
even
if
followed
by
a
non
-
editable
node
"
content
:
"
<
span
>
[
]
abc
<
/
span
>
<
span
contenteditable
=
\
"
false
\
"
>
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
to
the
first
editable
text
node
in
the
first
<
span
>
node
even
if
followed
by
a
non
-
editable
node
having
another
text
node
"
content
:
"
<
span
>
[
]
abc
<
/
span
>
<
span
contenteditable
=
\
"
false
\
"
>
def
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
to
the
first
editable
text
node
in
the
first
<
span
>
node
even
if
followed
by
a
non
-
editable
node
having
a
<
br
>
node
"
content
:
"
<
span
>
[
]
abc
<
/
span
>
<
span
contenteditable
=
\
"
false
\
"
>
<
br
>
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
to
the
first
editable
<
br
>
node
in
the
first
<
span
>
node
even
if
followed
by
a
non
-
editable
node
"
content
:
"
<
span
>
{
}
<
br
>
<
/
span
>
<
span
contenteditable
=
\
"
false
\
"
>
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
to
the
first
editable
<
br
>
node
in
the
first
<
span
>
node
even
if
followed
by
a
non
-
editable
node
having
a
text
node
"
content
:
"
<
span
>
{
}
<
br
>
<
/
span
>
<
span
contenteditable
=
\
"
false
\
"
>
abc
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
to
the
first
editable
<
br
>
node
in
the
first
<
span
>
node
even
if
followed
by
a
non
-
editable
node
having
a
<
br
>
node
"
content
:
"
<
span
>
{
}
<
br
>
<
/
span
>
<
span
contenteditable
=
\
"
false
\
"
>
<
br
>
<
/
span
>
"
}
{
description
:
"
editor
should
collapse
selection
to
the
first
editable
text
node
in
the
first
<
p
>
node
even
if
followed
by
a
non
-
editable
node
"
content
:
"
<
p
>
[
]
abc
<
/
p
>
<
p
contenteditable
=
\
"
false
\
"
>
<
/
p
>
"
}
{
description
:
"
editor
should
collapse
selection
to
the
first
editable
text
node
in
the
first
<
p
>
node
even
if
followed
by
a
non
-
editable
node
having
another
text
node
"
content
:
"
<
p
>
[
]
abc
<
/
p
>
<
p
contenteditable
=
\
"
false
\
"
>
def
<
/
p
>
"
}
{
description
:
"
editor
should
collapse
selection
to
the
first
editable
text
node
in
the
first
<
p
>
node
even
if
followed
by
a
non
-
editable
node
having
a
<
br
>
node
"
content
:
"
<
p
>
[
]
abc
<
/
p
>
<
p
contenteditable
=
\
"
false
\
"
>
<
br
>
<
/
p
>
"
}
{
description
:
"
editor
should
collapse
selection
to
the
first
editable
<
br
>
node
in
the
first
<
p
>
node
even
if
followed
by
a
non
-
editable
node
"
content
:
"
<
p
>
{
}
<
br
>
<
/
p
>
<
p
contenteditable
=
\
"
false
\
"
>
<
/
p
>
"
}
{
description
:
"
editor
should
collapse
selection
to
the
first
editable
<
br
>
node
in
the
first
<
p
>
node
even
if
followed
by
a
non
-
editable
node
having
a
text
node
"
content
:
"
<
p
>
{
}
<
br
>
<
/
p
>
<
p
contenteditable
=
\
"
false
\
"
>
abc
<
/
p
>
"
}
{
description
:
"
editor
should
collapse
selection
to
the
first
editable
<
br
>
node
in
the
first
<
p
>
node
even
if
followed
by
a
non
-
editable
node
having
a
<
br
>
node
"
content
:
"
<
p
>
{
}
<
br
>
<
/
p
>
<
p
contenteditable
=
\
"
false
\
"
>
<
br
>
<
/
p
>
"
}
{
description
:
"
editor
should
collapse
selection
to
start
of
itself
if
first
content
is
an
input
element
"
content
:
"
{
}
<
input
>
abc
"
}
{
description
:
"
editor
should
collapse
selection
to
start
of
itself
if
first
content
is
an
hr
element
"
content
:
"
{
}
<
hr
>
abc
"
}
{
description
:
"
editor
should
collapse
selection
to
start
of
itself
if
first
content
is
an
textarea
element
"
content
:
"
{
}
<
textarea
>
abc
<
/
textarea
>
def
"
}
{
description
:
"
editor
should
collapse
selection
to
the
input
element
"
content
:
"
<
div
>
{
}
<
input
>
abc
<
/
div
>
"
}
{
description
:
"
editor
should
collapse
selection
to
the
hr
element
"
content
:
"
<
div
>
{
}
<
hr
>
abc
<
/
div
>
"
}
{
description
:
"
editor
should
collapse
selection
to
the
textarea
element
"
content
:
"
<
div
>
{
}
<
textarea
>
abc
<
/
textarea
>
def
<
/
div
>
"
}
]
;
const
editor
=
document
.
getElementById
(
"
editor
"
)
;
const
selection
=
document
.
getSelection
(
)
;
for
(
const
testData
of
tests
)
{
test
(
function
(
)
{
editor
.
blur
(
)
;
selection
.
removeAllRanges
(
)
;
editor
.
innerHTML
=
testData
.
content
.
replace
(
/
[
{
}
\
[
\
]
]
/
g
"
"
)
;
editor
.
focus
(
)
;
editor
.
getBoundingClientRect
(
)
;
assert_equals
(
selection
.
rangeCount
1
"
Only
one
caret
should
be
in
the
editor
"
)
;
if
(
selection
.
rangeCount
)
{
addBrackets
(
selection
.
getRangeAt
(
0
)
)
;
assert_equals
(
editor
.
innerHTML
testData
.
content
)
;
}
}
testData
.
description
)
;
}
test
(
function
(
)
{
/
/
Check
if
selection
is
initialized
after
temporarily
blurred
.
editor
.
innerHTML
=
"
<
p
>
abc
<
/
p
>
<
p
>
def
<
/
p
>
"
;
editor
.
focus
(
)
;
/
/
Move
selection
to
the
second
paragraph
.
selection
.
collapse
(
editor
.
firstChild
.
nextSibling
.
firstChild
)
;
/
/
Reset
focus
.
editor
.
blur
(
)
;
editor
.
focus
(
)
;
/
/
Then
selection
should
still
be
in
the
second
paragraph
.
assert_equals
(
selection
.
rangeCount
1
"
Only
one
caret
should
be
in
the
editor
"
)
;
if
(
selection
.
rangeCount
)
{
addBrackets
(
selection
.
getRangeAt
(
0
)
)
;
assert_equals
(
editor
.
innerHTML
"
<
p
>
abc
<
/
p
>
<
p
>
[
]
def
<
/
p
>
"
)
;
}
}
"
editor
shouldn
'
t
reset
selection
when
it
gets
focus
again
"
)
;
}
)
(
)
;
<
/
script
>
