<
!
DOCTYPE
html
>
<
html
class
=
reftest
-
wait
>
<
title
>
Shared
transitions
:
shared
element
writing
-
modes
<
/
title
>
<
link
rel
=
"
help
"
href
=
"
https
:
/
/
github
.
com
/
WICG
/
view
-
transitions
"
>
<
link
rel
=
"
author
"
href
=
"
mailto
:
vmpstr
chromium
.
org
"
>
<
link
rel
=
"
match
"
href
=
"
japanese
-
tag
-
ref
.
html
"
>
<
script
src
=
"
/
common
/
reftest
-
wait
.
js
"
>
<
/
script
>
<
style
>
#
hidden
{
width
:
100px
;
height
:
100px
;
background
:
red
;
position
:
absolute
;
top
:
0
;
left
:
0
;
contain
:
paint
;
view
-
transition
-
name
:
;
}
.
tb
{
writing
-
mode
:
horizontal
-
tb
;
}
.
lr
{
writing
-
mode
:
vertical
-
lr
;
}
.
rl
{
writing
-
mode
:
vertical
-
rl
;
}
.
shared
{
margin
:
2px
;
width
:
100px
;
height
:
50px
;
background
:
green
;
contain
:
paint
;
border
:
1px
solid
black
;
}
#
target1
#
target2
#
target3
{
background
:
red
;
position
:
absolute
;
top
:
50px
;
left
:
50px
;
width
:
100px
;
height
:
500px
;
contain
:
paint
;
}
#
one
{
view
-
transition
-
name
:
;
}
#
two
{
view
-
transition
-
name
:
;
}
#
three
{
view
-
transition
-
name
:
;
}
html
:
:
view
-
transition
-
group
(
)
{
animation
-
duration
:
300s
;
}
html
:
:
view
-
transition
-
image
-
pair
(
)
{
animation
:
unset
;
opacity
:
0
;
}
html
:
:
view
-
transition
-
group
(
)
html
:
:
view
-
transition
-
group
(
)
html
:
:
view
-
transition
-
group
(
)
{
animation
-
delay
:
300s
;
animation
-
fill
-
mode
:
both
;
}
html
:
:
view
-
transition
-
new
(
)
html
:
:
view
-
transition
-
new
(
)
html
:
:
view
-
transition
-
new
(
)
{
animation
:
unset
;
opacity
:
0
;
}
html
:
:
view
-
transition
-
old
(
)
html
:
:
view
-
transition
-
old
(
)
html
:
:
view
-
transition
-
old
(
)
{
animation
:
unset
;
opacity
:
1
;
}
/
*
hide
the
root
so
we
show
transition
background
to
ensure
we
'
re
in
a
transition
*
/
html
:
:
view
-
transition
-
group
(
root
)
{
animation
:
unset
;
opacity
:
0
;
}
html
:
:
view
-
transition
{
background
:
lightpink
;
}
<
/
style
>
<
div
id
=
hidden
>
Should
not
be
visible
<
/
div
>
<
div
id
=
target1
>
Should
not
be
visible
<
/
div
>
<
div
id
=
target2
>
Should
not
be
visible
<
/
div
>
<
div
id
=
target3
>
Should
not
be
visible
<
/
div
>
<
div
id
=
one
class
=
"
shared
tb
"
>
T
<
/
div
>
<
div
id
=
two
class
=
"
shared
lr
"
>
T
<
/
div
>
<
div
id
=
three
class
=
"
shared
rl
"
>
T
<
/
div
>
<
script
>
failIfNot
(
document
.
startViewTransition
"
Missing
document
.
startViewTransition
"
)
;
async
function
runTest
(
)
{
document
.
startViewTransition
(
(
)
=
>
{
one
.
remove
(
)
;
two
.
remove
(
)
;
three
.
remove
(
)
;
hidden
.
style
.
left
=
"
200px
"
;
target1
.
style
.
viewTransitionName
=
"
"
;
target2
.
style
.
viewTransitionName
=
"
"
;
target3
.
style
.
viewTransitionName
=
"
"
;
requestAnimationFrame
(
(
)
=
>
requestAnimationFrame
(
takeScreenshot
)
)
;
}
)
;
}
onload
=
(
)
=
>
requestAnimationFrame
(
(
)
=
>
requestAnimationFrame
(
runTest
)
)
;
<
/
script
>
