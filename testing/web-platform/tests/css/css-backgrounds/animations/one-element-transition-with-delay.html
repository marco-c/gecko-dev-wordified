<
!
DOCTYPE
html
>
<
html
class
=
"
reftest
-
wait
"
>
<
link
rel
=
"
help
"
href
=
"
https
:
/
/
drafts
.
csswg
.
org
/
css
-
backgrounds
-
3
/
#
background
-
color
"
>
<
link
rel
=
"
match
"
href
=
"
one
-
element
-
transition
-
with
-
delay
-
ref
.
html
"
>
<
style
>
.
container
{
width
:
100px
;
height
:
100px
;
background
-
color
:
rgb
(
0
200
0
)
;
transition
:
background
-
color
200000ms
steps
(
2
)
-
99995ms
;
}
<
/
style
>
<
script
src
=
"
/
common
/
reftest
-
wait
.
js
"
>
<
/
script
>
<
body
>
<
div
class
=
"
container
"
id
=
"
target
"
>
<
/
div
>
<
script
>
/
/
This
test
differs
from
"
one
-
element
-
transition
.
html
"
because
it
runs
the
/
/
transition
starting
from
the
set
background
color
rather
than
using
a
/
/
delay
to
start
in
the
middle
of
the
transition
.
This
tests
a
new
codepath
/
/
where
the
first
frame
of
the
transition
has
the
original
background
color
/
/
which
is
why
two
requestAnimationFrames
are
used
to
get
to
the
second
frame
/
/
when
the
transition
is
fully
running
.
function
update
(
)
{
document
.
getElementById
(
'
target
'
)
.
style
.
backgroundColor
=
"
rgb
(
200
0
0
)
"
;
requestAnimationFrame
(
(
)
=
>
{
requestAnimationFrame
(
(
)
=
>
{
takeScreenshot
(
)
;
}
)
;
}
)
;
}
requestAnimationFrame
(
function
(
)
{
requestAnimationFrame
(
update
)
;
}
)
;
<
/
script
>
<
/
body
>
<
/
html
>
