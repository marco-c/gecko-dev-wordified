From
:
Daniel
Baker
<
dbaker
mozilla
.
com
>
Date
:
Mon
1
Dec
2025
18
:
27
:
02
-
0700
Subject
:
(
tmp
-
cherry
-
pick
)
Revert
"
Avoid
seeding
Random
with
current
time
in
rtp_payload_params
"
(
5d7e31cd07
)
This
reverts
commit
9d4cf430f2feae0c86df3aad698ec83d71637580
.
Reason
for
revert
:
absl
:
:
BitGen
has
issues
seeding
on
Windows10
Chromium
render
process
.
https
:
/
/
ci
.
chromium
.
org
/
ui
/
p
/
chromium
/
builders
/
webrtc
.
fyi
/
WebRTC
%
20Chromium
%
20FYI
%
20Win10
%
20Tester
/
18543
/
test
-
results
Original
change
'
s
description
:
>
Avoid
seeding
Random
with
current
time
in
rtp_payload_params
>
>
Random
default
constructor
now
provides
a
non
-
deterministic
random
seed
.
>
>
This
CL
was
uploaded
by
an
experimental
version
of
git
cl
split
>
(
https
:
/
/
crbug
.
com
/
389069356
)
.
>
>
R
=
perkj
webrtc
.
org
>
>
Bug
:
webrtc
:
42223992
webrtc
:
441137274
>
Change
-
Id
:
Icc10c5cd4e83cd46d78c3cd1165c6d5ff69b9e76
>
Reviewed
-
on
:
https
:
/
/
webrtc
-
review
.
googlesource
.
com
/
c
/
src
/
+
/
408740
>
Reviewed
-
by
:
Per
Kjellander
<
perkj
webrtc
.
org
>
>
Auto
-
Submit
:
Evan
Shrubsole
<
eshr
webrtc
.
org
>
>
Commit
-
Queue
:
Per
Kjellander
<
perkj
webrtc
.
org
>
>
Cr
-
Commit
-
Position
:
refs
/
heads
/
main
{
#
45603
}
Bug
:
webrtc
:
42223992
webrtc
:
441137274
No
-
Presubmit
:
true
No
-
Tree
-
Checks
:
true
No
-
Try
:
true
Change
-
Id
:
I6a6e1c88d15b324706090b267f7dff64583357ee
Reviewed
-
on
:
https
:
/
/
webrtc
-
review
.
googlesource
.
com
/
c
/
src
/
+
/
408901
Commit
-
Queue
:
Evan
Shrubsole
<
eshr
webrtc
.
org
>
Bot
-
Commit
:
Rubber
Stamper
<
rubber
-
stamper
appspot
.
gserviceaccount
.
com
>
Reviewed
-
by
:
Harald
Alvestrand
<
hta
webrtc
.
org
>
Cr
-
Commit
-
Position
:
refs
/
heads
/
main
{
#
45608
}
-
-
-
call
/
rtp_payload_params
.
cc
|
3
+
+
-
1
file
changed
2
insertions
(
+
)
1
deletion
(
-
)
diff
-
-
git
a
/
call
/
rtp_payload_params
.
cc
b
/
call
/
rtp_payload_params
.
cc
index
2229a25fe5
.
.
4840f6d899
100644
-
-
-
a
/
call
/
rtp_payload_params
.
cc
+
+
+
b
/
call
/
rtp_payload_params
.
cc
-
38
6
+
38
7
#
include
"
rtc_base
/
checks
.
h
"
#
include
"
rtc_base
/
logging
.
h
"
#
include
"
rtc_base
/
random
.
h
"
+
#
include
"
rtc_base
/
time_utils
.
h
"
namespace
webrtc
{
namespace
{
-
192
7
+
193
7
RtpPayloadParams
:
:
RtpPayloadParams
(
const
uint32_t
ssrc
chain_last_frame_id_
.
fill
(
-
1
)
;
buffer_id_to_frame_id_
.
fill
(
-
1
)
;
-
Random
random
;
+
Random
random
(
TimeMicros
(
)
)
;
state_
.
picture_id
=
state
?
state
-
>
picture_id
:
(
random
.
Rand
<
int16_t
>
(
)
&
0x7FFF
)
;
state_
.
tl0_pic_idx
=
state
?
state
-
>
tl0_pic_idx
:
(
random
.
Rand
<
uint8_t
>
(
)
)
;
