From
:
Michael
Froman
<
mjfroman
mac
.
com
>
Date
:
Sun
10
Aug
2025
20
:
18
:
42
-
0500
Subject
:
(
tmp
-
cherry
-
pick
)
Revert
"
[
ResamplerHelper
]
Avoid
resampling
muted
audio
frames
.
"
(
8b8874ac6a
)
MIME
-
Version
:
1
.
0
Content
-
Type
:
text
/
plain
;
charset
=
UTF
-
8
Content
-
Transfer
-
Encoding
:
8bit
This
reverts
commit
cad50b5a1445a344dffaae0f57d5fbde95910b98
.
Reason
for
revert
:
This
might
introduce
unwanted
side
effects
and
also
does
not
seem
to
be
worth
it
for
the
most
common
case
.
Bug
:
none
Original
change
'
s
description
:
>
[
ResamplerHelper
]
Avoid
resampling
muted
audio
frames
.
>
>
Bug
:
none
>
Change
-
Id
:
I1787b5ea6b9b33a0d37992287a4adc287fbb2ce5
>
Reviewed
-
on
:
https
:
/
/
webrtc
-
review
.
googlesource
.
com
/
c
/
src
/
+
/
392662
>
Commit
-
Queue
:
Tomas
Gunnarsson
<
tommi
webrtc
.
org
>
>
Reviewed
-
by
:
Jakob
Ivarsson
<
jakobi
webrtc
.
org
>
>
Cr
-
Commit
-
Position
:
refs
/
heads
/
main
{
#
44729
}
Bug
:
none
No
-
Presubmit
:
true
No
-
Tree
-
Checks
:
true
No
-
Try
:
true
Change
-
Id
:
I8ff3fc77aab4c25f5e76b23946b8a3c2f2edc47f
Reviewed
-
on
:
https
:
/
/
webrtc
-
review
.
googlesource
.
com
/
c
/
src
/
+
/
393201
Commit
-
Queue
:
Jakob
Ivarsson
<
jakobi
webrtc
.
org
>
Auto
-
Submit
:
Tomas
Gunnarsson
<
tommi
webrtc
.
org
>
Reviewed
-
by
:
Jakob
Ivarsson
<
jakobi
webrtc
.
org
>
Cr
-
Commit
-
Position
:
refs
/
heads
/
main
{
#
44738
}
-
-
-
modules
/
audio_coding
/
acm2
/
acm_resampler
.
cc
|
6
+
+
-
-
-
-
1
file
changed
2
insertions
(
+
)
4
deletions
(
-
)
diff
-
-
git
a
/
modules
/
audio_coding
/
acm2
/
acm_resampler
.
cc
b
/
modules
/
audio_coding
/
acm2
/
acm_resampler
.
cc
index
7d42d8fa1d
.
.
9daa04d14b
100644
-
-
-
a
/
modules
/
audio_coding
/
acm2
/
acm_resampler
.
cc
+
+
+
b
/
modules
/
audio_coding
/
acm2
/
acm_resampler
.
cc
-
58
10
+
58
8
bool
ResamplerHelper
:
:
MaybeResample
(
int
desired_sample_rate_hz
audio_frame
-
>
SetSampleRateAndChannelSize
(
desired_sample_rate_hz
)
;
InterleavedView
<
int16_t
>
dst
=
audio_frame
-
>
mutable_data
(
audio_frame
-
>
samples_per_channel
(
)
audio_frame
-
>
num_channels
(
)
)
;
-
/
/
Muted
frames
will
already
have
the
audio
buffer
zeroed
out
.
-
if
(
!
audio_frame
-
>
muted
(
)
)
{
-
resampler_
.
Resample
(
src
dst
)
;
-
}
+
/
/
TODO
(
tommi
)
:
Don
'
t
resample
muted
audio
frames
.
+
resampler_
.
Resample
(
src
dst
)
;
resampled_last_output_frame_
=
true
;
}
else
{
resampled_last_output_frame_
=
false
;
