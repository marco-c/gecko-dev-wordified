BINJS
[
GRAMMAR
]
identity
;
L
(
IdentifierExpression
StaticMemberExpression
ThisExpression
&
ExpressionStatement
(
AssignmentExpression8StaticMemberAssignmentTarget
"
BindingIdentifier
>
AssertedPositionalParameterName
BinaryExpression0LiteralNumericExpression
(
AssertedDeclaredName
AssertedParameterScope
AssertedVarScope
CallExpression
FormalParameters
.
EagerFunctionExpression4FunctionExpressionContents
*
LiteralNullExpression
ReturnStatement
VariableDeclarator
AssertedBlockScope
Block
&
VariableDeclaration
IfStatement
NewExpression4AssignmentTargetIdentifier0EagerFunctionDeclaration0FunctionOrMethodContents
.
LiteralStringExpression
UpdateExpression0ComputedMemberExpression
<
ComputedMemberAssignmentTarget
WhileStatement2AssertedScriptGlobalScope
ForStatement
Script
UnaryExpression
[
STRINGS
]
identity
;
W
var
queue
scheduler
packet
id
v1
prototype
priority
currentTcb
link
state
task
v2
=
=
Scheduler
count
Packet
TaskControlBlock
v
KIND_DEVICE
ID_DEVICE_A
ID_DEVICE_B
run
tcb
DeviceTask
HandlerTask
ID_HANDLER_A
IdleTask
STATE_SUSPENDED
WorkerTask
toString
!
=
DATA_SIZE
ID_WORKER
KIND_WORK
STATE_HELD
STATE_RUNNABLE
a1
addTask
i
kind
next
t
+
ID_HANDLER_B
STATE_RUNNING0STATE_SUSPENDED_RUNNABLE
addTo
blocks
list
peek
suspendCurrent
+
+
|
COUNT
&
EXPECTED_HOLD_COUNT
(
EXPECTED_QUEUE_COUNT
ID_IDLE
NUMBER_OF_IDS
STATE_NOT_HELD
a2
addDeviceTask
addHandlerTask
currentId
holdCount
holdCurrent
queueCount
release
runRichards
&
>
Array
addIdleTask
addRunningTask
addWorkerTask
assertEq
checkPriorityAdd
"
isHeldOrSuspended
markAsHeld
markAsNotHeld
markAsRunnable
markAsSuspended
schedule
setRunning
<
>
>
}
tcb
{
-
-
^
|
|
~
[
TREE
]
identity
;
s6HD6
l
0
n
p
2
(
*
4
X
r
B
6
&
D
t
F
v
H
Z
8
\
"
:
t6
8
.
(
2
r
l
.
(
2
B
D
4
2
B
D
B
4
2
(
&
4
2
(
&
4
2
(
&
|
4
4
2
*
&
4
2
*
&
4
2
*
&
|
X
p
z
(
z
*
p
n
.
(
l
.
(
p
.
(
n
6
8
2
t
b
~
.
(
r
.
(
B
?
.
(
4
.
(
X
.
(
(
.
(
*
.
(
t
.
(
&
.
(
D
?
"
2
6
?
"
L
2
:
4
|
"
L
2
2
z
"
L
2
0
"
L
L
"
2
"
b
b
"
bB
>
*
0
*
*
~
"
.
.
(
.
>
0
.
&
.
.
0
.
*
&
.
*
&
"
<
h
&
f
"
&
"
T
.
(
T
>
0
T
&
T
<
h
~
&
T
6
"
8
0
*
8
*
\
.
(
Z
.
(
H
?
.
(
8
.
(
F
.
(
\
j
8
H
.
(
vJ
F
"
"
Z
"
"
v
"
"
j
F
"
"
&
>
F
8
"
"
j
8
"
"
j
H
"
"
.
(
0
\
*
4
0
*
Z
*
H
*
4
&
"
"
0
*
0
&
*
^
&
"
<
"
&
V
V
V
V
:
:
:
6
6
8
6
"
<
0
&
0
?
*
?
&
(
*
?
&
*
6
<
"
&
:
66
0
8
0
"
0
*
0
&
f
.
(
&
*
&
0
<
"
&
:
06
:
8
:
"
N
0
*
&
f
*
0
4
*
X
*
4
J
F
.
(
N
N
<
h4N
*
<
h
0
:
?
x
N
&
:
<
"
&
:
:
6
2
8
2
"
0
>
*
0
P
D
*
^
*
^
0
>
*
.
(
J
.
(
0
*
0
>
*
4
J
>
x
J
V
?
&
*
4
&
&
f
2
<
"
&
:
2
.
(
6
8
P
P
P
P
J
x2
^
"
R
d
0
&
.
(
d
(
R
B
>
4d
R
4R
d
R
&
<
"
&
:
